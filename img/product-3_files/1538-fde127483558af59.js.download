"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1538],{42353:(e,t,r)=>{r.d(t,{AX:()=>K,H2:()=>z,J2:()=>P,MQ:()=>ee,Nh:()=>j,OD:()=>q,PP:()=>ei,R_:()=>G,SZ:()=>W,WA:()=>$,fP:()=>Q,kL:()=>Y,lm:()=>x,mF:()=>ea,mb:()=>Z,pg:()=>el,to:()=>B,uN:()=>en,xU:()=>X,y6:()=>eo});var a=r(99880),o=r(8688),n=r(65854),i=r(51913),l=r(28311),u=r(85202),s=r(96689),p=r(18612),c=r(43331),d=r(39955),_=r(6858),y=r(82032),E=r(41784),m=r(78164),T=r(49111),g=r(90509),S=r(61608),f=r(3633),I=r(29466),A=r(24903),O=r(20343),h=r(78095),L=r(48074),k=r(50822),R=r(58623),v=r(85253),U=r(61444),N=r(80978),F=r(34823),b=r(84174),C=r(67500);let{Sentry:M,captureException:D}=(0,O.A)();function P(e){return{type:b.xHs,payload:{fulfillmentMethod:e.fulfillment_method,geohash:e.geohash,postcode:e.postcode,city:e.city,neighborhood:e.neighborhood,deliveryTime:e.delivery_time,fulfillmentTime:e.delivery_time,query:e.query}}}function $(e){let{query:t}=e;return{type:b.ILG,payload:{query:t}}}let w=e=>{let{state:t,query:r,url:o,columnCount:n,userPreferences:i={},includeToken:u}=e,s={query:r,web_column_count:(0,T.Ci)(n)(t)},p=(0,g.XK)(t);return p&&(s.brand_uname=p),i.seen_modals&&(s.user_preference||(s.user_preference={}),s.user_preference.seen_modals=Object.values(i.seen_modals)),{fulfillment_methods:(0,T.dr)(t),location:(0,T.uu)(t),options:s,url:o,uuid:(0,a.A)(),ui_actions:(0,l.aM)(t),ui_features:(0,l.US)(t),ui_themes:(0,l.ri)(t),ui_layouts:k.vJ,ui_blocks:k.Ap,include_token:u}},V=e=>{let t,r,{state:a,selectedFilters:o,clearCollection:n,exitCollection:i,fulfillmentMethod:l,fulfillmentTime:u}=e,s=[...o];if(l){let e=(0,T.dr)(a),r=(0,_.x)(e,l);t=(0,_.n)(r)}else t=(0,_.n)((0,T.Eq)(a));if(t&&s.push(t),u){let e=(0,T._9)(a),t=(0,y.$)(e,u);r=(0,y.P)(t)}else r=(0,y.P)((0,T.Wr)(a));r&&s.push(r);let{geohash:p,postcode:c}=(0,T.uu)(a);p?s.push(`geohash=${p}`):c&&s.push(`postcode=${c}`);let d=(0,T.bD)(a),E=(0,T.WC)(a);return i?E&&s.push(E):d&&!n&&s.push(d),s},H=e=>{let{state:t,selectedFilters:r,clearCollection:a,exitCollection:o,fulfillmentMethod:n,fulfillmentTime:i}=e;{let e=V({state:t,selectedFilters:r,clearCollection:a,exitCollection:o,fulfillmentMethod:n,fulfillmentTime:i});return`${window.location.origin}${window.location.pathname}?${e.join("&")}`.replace(/\.dev|\.test/,"")}};function G(){let{query:e="",params:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(r,o)=>{let i=o(),p=performance.now(),c=""===e,d=(0,n.L4)(i,u.CO_HOME_MOCK_ENDPOINT),_=(0,n.iM)(i,s.COLOR_TOKENS_MVT,n.lJ.FEATURE),y=`/consumer/graphql/${d?"mock":""}`,E=H({state:i,selectedFilters:function(e,t,r){let a=(0,T.r0)(r),o=[`query=${encodeURIComponent(e)}`];return t?t.forEach(e=>{let{id:t,value:[r]}=e;o.push(`${t}=${r}`)}):a?.searchBarMeta?.searchBarParams&&a.searchBarMeta.searchBarParams.forEach(e=>{let{id:t,value:[r]}=e;o.push(`${t}=${r}`)}),o}(e,t,i),clearCollection:!0}),m={ui_features:(0,l.US)(i),location:(0,T.uu)(i),options:{query:e,recent_searches:(0,I.mp)()},url:E,uuid:(0,a.A)(),include_token:_};if(t?.id==="collection"&&t.value?.includes("all")){let e=new URL(E);e.searchParams.delete("collection"),m.url=e}let g={method:"POST",timeout:{server:1e4},body:(0,h.Kt)(m),headers:(0,S.V)(i)},f=(e,t)=>r((0,C.lZ)(e-p,t));return r({type:b.R_A,endpoint:y,options:g,onSuccess:e=>{let t=e.payload?.data?.results?.meta?.options?.recent_searches;t&&(0,I.xb)(t),c&&f(performance.now(),!0)},onFailure:()=>{c&&f(performance.now(),!1)}})}}function B(){let{query:e="",url:t="",columnCount:r=1,clearCollection:a=!1,exitCollection:l=!1,selectedFilters:p=[],fulfillmentMethod:c,fulfillmentTime:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(_,y)=>{let E=y(),T=(0,n.L4)(E,u.CO_HOME_MOCK_ENDPOINT),f=(0,n.iM)(E,s.COLOR_TOKENS_MVT,n.lJ.FEATURE),I=`/consumer/graphql/${T?"mock":""}`,A=(0,g.oE)(E),O=t||H({state:E,selectedFilters:p,clearCollection:a,exitCollection:l,fulfillmentMethod:c,fulfillmentTime:d}),L=w({state:E,query:e,url:O,columnCount:r,userPreferences:A,includeToken:f}),k={method:"POST",timeout:{server:1e4},body:(0,h.u_)(L),headers:{...(0,S.V)(E),"X-Roo-Rooblocks-Version":o.ROOBLOCK_VERSION}};return _({type:b.eA5,endpoint:I,options:k}).catch(e=>{let t=e.status||500,r=e.data||{},a=r.message||e.message;_({type:b.JSz,status:t,message:a,payload:{...r}});let o=(0,m.Dv)({status:t,message:a||r.errors?.[0]?.message,data:r.errors});return M.withScope(e=>{e.setExtras({"home.queryUrl":O,"home.neighborhood":L.location.neighborhood_uname,"home.trackingId":L.uuid,statusCode:o.status}),D(o.error)}),(0,F.u)({message:i.A.gettext("global.notification.generic_error"),type:"error"})})}}let q=e=>{let{fulfillmentMethod:t,fulfillmentTime:r,locationInput:o,restaurantDrnId:i,restaurantId:p,servedMenuTrackingId:d,columnCount:_=1}=e;return(e,y)=>{let E=y(),m=(0,n.L4)(E,u.CO_HOME_MOCK_ENDPOINT),g=(0,n.iM)(E,s.COLOR_TOKENS_MVT,n.lJ.FEATURE),f=Date.now();return e({type:b.IFc,endpoint:`/consumer/graphql/${m?"mock":""}`,options:{method:"POST",headers:(0,S.V)(E),timeout:{server:1e4},body:(0,h.zH)({fulfillment_method:t,fulfillment_time:r,include_token:g,location:o,restaurant_drn_id:i,restaurant_id:p,served_menu_tracking_id:d,ui_actions:(0,l.aM)(E),ui_features:(0,l.US)(E),ui_themes:(0,l.ri)(E),ui_layouts:k.vJ,uuid:(0,a.A)(),web_column_count:(0,T.Ci)(_)(E)})},onSuccess:t=>{let{payload:r}=t,{results:a}=r.data;if(a.layout){let t=Date.now()-f;e((0,c.TH)(a.uuid,t))}}})}};function W(){return(e,t)=>{let r=t(),o=(0,n.L4)(r,u.CO_HOME_MOCK_ENDPOINT),i=`/consumer/graphql/${o?"mock":""}`,s={method:"POST",timeout:{server:1e4},body:(0,h.rC)({fulfillment_methods:(0,T.dr)(r),location:(0,T.uu)(r),uuid:(0,a.A)(),ui_actions:(0,l.aM)(r),ui_features:(0,l.US)(r),ui_themes:(0,l.ri)(r),ui_layouts:k.vJ}),headers:(0,S.V)(r)};return e({type:b.ZPc,endpoint:i,options:s})}}function K(){return e=>{e({type:b.K49})}}function Y(e){return t=>{t({type:b.e27,payload:e})}}function x(){return(e,t)=>{let r;let{request:a}=t();return e(B({url:`${a.host}/${a.currentUrl}`.replace(/\.dev|\.test/,"").replace(/\/$/,""),columnCount:(r=a.userAgent,["ios","android"].includes((0,L.A)(r)))?1:4}))}}function J(e){return t=>t(B({selectedFilters:e}))}let j=function(e){let{fulfillmentTime:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return(e,a)=>{let o=a();return e(r({selectedFilters:(0,T.BI)(o),fulfillmentTime:t}))}},z=function(e){let{fulfillmentMethod:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return(e,a)=>{let o=a();return e(r({selectedFilters:(0,T.BI)(o),fulfillmentMethod:t}))}};function X(e){return t=>{t({type:e?b.fTi:b.IRs,payload:{}}),e&&t((0,N.d)(d.r.RESTAURANT_LIST))}}function Q(e){return{type:e?b.oOW:b.ziX,payload:{}}}function Z(){return{type:b.e6u,payload:{}}}let ee=()=>({type:b.cw4}),et=(e,t)=>{let r=t.map(e=>`${e.id}=${e.value[0]}`);return J([...(0,T.BI)(e),...r])},er=(e,t)=>{let r=t.map(e=>`${e.id}=${e.value[0]}`);return J((0,T.BI)(e).filter(e=>!r.includes(e)))},ea={CHANGE_DELIVERY_TIME:()=>X(!0),SHOW_MEAL_CARD_ISSUERS:()=>(0,v.ku)(),CLEAR_FILTERS:()=>B({clearCollection:!0}),NO_DELIVERY_YET:()=>(e,t)=>{let{postcode:r,lat:a,lon:o}=t().home.feed.meta.location;return e({type:b.ZJG,payload:{post_code:r||"",formatted_address:"",lng:o,lat:a}}),e({type:b.Jax})},SHOWCASE_PICKUP:()=>e=>{e((0,p.mG)()),e((0,p.YB)()),e(z({fulfillmentMethod:E.cF}))},SHOW_HOME_MAP_VIEW:()=>e=>{e((0,U.wX)()),e((0,p.YB)()),e((0,R.CK)()),e((0,R.MH)())},[k.jq]:()=>e=>{e(B({url:window.location.href}))},SHOW_ADDRESS_PROMPT:()=>e=>{e(Q(!0))},OPEN_FEEDBACK_FORM:(e,t)=>e=>{e((0,f.CV)(!0,t))},COPY_TO_CLIPBOARD:(e,t)=>e=>{e((0,p.uR)((0,A.U)(t))),e(ee())},APPLY_FILTER:(e,t)=>r=>{r(et(e,t))},REMOVE_FILTER:(e,t)=>r=>{r(er(e,t))}};function eo(e,t){return(r,a)=>{let o=ea[e],n=a();if(o)return r(o(n,t))}}let en=()=>({type:b.dm9}),ei=()=>{window.localStorage.setItem(E.l5,window.location.search)},el=()=>(e,t)=>{let r=t();e((0,p.YB)());let a=(0,T.Tz)(r);if(a){let t=a.params?.find(e=>"fulfillment_method"===e.id)?.value?.[0];if(t)return e(z({fulfillmentMethod:t}))}return e(B({exitCollection:!0}))}},58623:(e,t,r)=>{r.d(t,{CK:()=>l,MH:()=>u,to:()=>s});var a=r(78095),o=r(1193),n=r(61444),i=r(84174);let l=()=>({type:i._DS}),u=function(){let{location:e,onFailure:t,onSuccess:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(l,u)=>{let s=u(),p=(0,o.NA)(s);e&&(p.location=e);let c={method:"POST",timeout:{server:1e4},body:(0,a.RX)(p)},d={type:i.Mu6,endpoint:"/consumer/graphql/",options:c};return e?d.onSuccess=()=>{l((0,n.rQ)({lat:e.lat,lng:e.lon})),"function"==typeof r&&r()}:"function"==typeof r&&(d.onSuccess=r),"function"==typeof t&&(d.onFailure=()=>{t()}),l(d)}},s=e=>({type:i.C8v,restaurantId:e})},85253:(e,t,r)=>{r.d(t,{f:()=>n,ku:()=>o});var a=r(84174);function o(){return(e,t)=>{let{country:r}=t().request;return e({type:a.d7w}),e({type:a.go5,endpoint:`/orderapp/v2/meal_cards?country_code=${r.tld}`,options:{method:"GET"}})}}function n(){return{type:a.eLh}}},80978:(e,t,r)=>{r.d(t,{d:()=>n});var a=r(10565),o=r(84750);let n=e=>(t,r)=>{let n=r();return t({type:o.pF,payload:{name:"Tapped Time Picker",properties:{...(0,a.tF)(n),"Source view":e}}})}},18612:(e,t,r)=>{r.d(t,{BX:()=>T,Hv:()=>b,Mb:()=>C,S2:()=>k,Se:()=>P,Xr:()=>O,YB:()=>U,aI:()=>v,cQ:()=>$,e4:()=>f,f1:()=>N,fv:()=>M,k4:()=>D,mG:()=>L,p:()=>S,pc:()=>R,pm:()=>I,s1:()=>g,uL:()=>A,uR:()=>F,z7:()=>h});var a=r(49111),o=r(65854),n=r(10565),i=r(23925),l=r(96689),u=r(85202),s=r(80886),p=r(50556),c=r(92390),d=r(39955),_=r(84750),y=r(37050),E=r(12662);let m="Served Home Tracking ID";function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,r)=>{let i=r();return t((0,E.l)("CUSTOMER_VIEWED_RESTAURANT_LIST")),t({type:_.pF,payload:{name:"Viewed Home",properties:{...(0,n.tF)(i),"Number of Restaurants":(0,a.S9)(i),[m]:(0,a._p)(i),Postcode:(0,a.KQ)(i),Geohash:(0,a.m_)(i),[l.MVT_1146]:(0,o.Lg)(i,l.MVT_1146),[l.MVT_MERCH_UGC_ORDER_RATING_FLOW]:(0,o.Lg)(i,l.MVT_MERCH_UGC_ORDER_RATING_FLOW),[l.HOME_FEED_REMOVE_FULFILLMENT_METHODS]:(0,o.Lg)(i,l.HOME_FEED_REMOVE_FULFILLMENT_METHODS),[l.SHOW_DISCOUNTED_PRICE_FOR_ITEMS_OVER_MOV]:(0,o.Lg)(i,l.SHOW_DISCOUNTED_PRICE_FOR_ITEMS_OVER_MOV),...e}}})}}function g(e){return(t,r)=>{let i=r(),u=a.r0(i)?.targetParams?.params?.find(e=>"collection"===e.id)?.value.join("/");return t({type:_.pF,payload:{name:"Viewed Collection",properties:{...(0,n.tF)(i),"Number of Restaurants":(0,a.S9)(i),[m]:(0,a._p)(i),[l.MVT_1146]:(0,o.Lg)(i,l.MVT_1146),source_page:u,...e}}})}}function S(e){let{layoutTrackingId:t,blockTrackingId:r,blockTrackingProperties:o={},actionTrackingId:i=""}=e;return(e,l)=>{let u=l();return e({type:_.pF,payload:{name:"Tapped Layout Block",properties:{...(0,n.tF)(u),"Layout Tracking ID":t,"Block Tracking ID":r,"Action Tracking ID":i,tracking_properties:o,[m]:(0,a._p)(u)}}})}}function f(e){return(t,r)=>{let o=r();return t({type:_.pF,payload:{name:"Tapped Layout",properties:{...(0,n.tF)(o),"Layout Tracking ID":e,[m]:(0,a._p)(o)}}})}}let I=(e,t)=>(r,o)=>{let n=o();return r({type:_.pF,payload:{name:"Home Tapped Interactive Element",properties:{tracking_id:e,[m]:(0,a._p)(n),...void 0!==t?{tracking_properties:t}:{}}}})};function A(){return e=>e({type:_.pF,payload:{name:"Showed collection education popup",properties:{}}})}function O(){return e=>e({type:_.pF,payload:{name:"Dismissed collection education popup",properties:{}}})}function h(){return e=>e({type:_.pF,payload:{name:"Tapped explore pickup",properties:{}}})}function L(){return{type:_.pF,payload:{name:"Tapped pickup banner",properties:{}}}}function k(e){let{modalId:t,modalTrackingId:r}=e;return(e,o)=>{let n=o();return e({type:_.pF,payload:{name:"VIEWED_MODAL",properties:{modal_type:t,modal_id:r,[m]:(0,a._p)(n)}}})}}function R(e){let{name:t,properties:r}=(0,p.Hz)({name:"Scroll Tracking",source:s.SW.HOME_FEED});return{name:t,properties:{...r,[m]:(0,a._p)(e)}}}function v(){return(e,t)=>{let r=t(),{name:a,properties:n}=R(r);return(0,o.L4)(r,u.CHT_IMPROVED_SCROLL_TRACKING)&&0!==n[s.Tt.ITEM_COUNT]?e({type:_.pF,payload:{name:a,properties:n}}):Promise.resolve()}}function U(){return async e=>(await e(v()),(0,y.W.dispatch)((0,p.Rj)(s.SW.HOME_FEED)))}function N(e){let{layoutTrackingId:t,direction:r}=e;return(e,o)=>{let n=o();return e({type:_.pF,payload:{name:"Scrolled Home Carousel",properties:{[m]:(0,a._p)(n),"Layout Tracking ID":t,"Scroll Direction":"prev"===r?"left":"right"}}})}}function F(e){return t=>t({type:_.pF,payload:{name:"Copy Voucher Code Tapped",properties:{code:e}}})}function b(e,t){return(r,o)=>{let n=o(),i=(0,a.CR)(n)||"";return r({type:_.pF,payload:{name:"Tapped Search Category Pill",properties:{id:e,search_query:t,[m]:i}}})}}let C=(e,t,r,a)=>(o,n)=>{let l=n(),{id:u}=(0,c.W8)(l);return o((0,i.Mb)(u,e,t,d.r.RESTAURANT_LIST,r,a))};function M(e){let{displayId:t,trackingId:r}=e;return(e,o)=>{let n=o();return e({type:_.pF,payload:{name:"Viewed Promotional Modal",properties:{[m]:(0,a._p)(n),modal_type:t,modal_id:r}}})}}let D=(e,t,r)=>(a,o)=>{let n=o(),{id:l}=(0,c.W8)(n);return a((0,i.k4)(l,e,t,d.r.RESTAURANT_LIST,r))};function P(e){let{displayId:t,trackingId:r,buttonTrackingId:o}=e;return(e,n)=>{let i=n();return e({type:_.pF,payload:{name:"Interacted With Modal",properties:{[m]:(0,a._p)(i),modal_type:t,modal_id:r,button_tracking_id:o}}})}}function $(e){let{displayId:t,trackingId:r,buttonTrackingId:o}=e;return(e,n)=>{let i=n();return e({type:_.pF,payload:{name:"Dismissed Modal",properties:{[m]:(0,a._p)(i),modal_type:t,modal_id:r,button_tracking_id:o}}})}}},61444:(e,t,r)=>{r.d(t,{Bq:()=>i,rQ:()=>l,wX:()=>n});var a=r(1193),o=r(84750);let n=()=>(e,t)=>{let r=t(),n=(0,a.QG)(r);return e({type:o.pF,payload:{name:"Toggled show map view",properties:{"Map view":!n}}})},i=e=>({type:o.pF,payload:{name:"Tapped pin",properties:{"Pin type":"restaurant",restaurant_id:parseInt(e,10)}}}),l=e=>{let{lat:t,lng:r}=e;return(e,n)=>{let i=n(),l=(0,a.ok)(i);return e({type:o.pF,payload:{name:"Tapped search this area",properties:{"Number of restaurants":l.length,"Search lat":t,"Search long":r}}})}}},67500:(e,t,r)=>{r.d(t,{CO:()=>f,OS:()=>m,Pj:()=>E,T4:()=>y,aI:()=>S,e$:()=>T,lZ:()=>d,pu:()=>g,sD:()=>_,tn:()=>c});var a=r(49111),o=r(10565),n=r(65854),i=r(50556),l=r(80886),u=r(84750),s=r(96689),p=r(37050);function c(){return(e,t)=>{let r=t();return e({type:u.pF,payload:{name:"Tapped Search Bar",properties:{[s.CO_SEARCH_BE_RECENT_SEARCHES]:(0,n.Lg)(r,s.CO_SEARCH_BE_RECENT_SEARCHES),[s.HOME_SEARCH_TABS_ENABLED]:(0,n.Lg)(r,s.HOME_SEARCH_TABS_ENABLED)}}})}}function d(e,t){return r=>r({type:u.pF,payload:{name:"REQUESTED_RECENT_SEARCHES",properties:{duration_millis:e,status:t}}})}function _(e){return t=>t({type:u.pF,payload:{name:"Typed In Search Bar",properties:{"Search term":e}}})}function y(e,t){return(r,n)=>{let i=n(),l={name:"Tapped Search Block",properties:{"Tracking ID":e,...(0,o.tF)(i),"Served Home Tracking ID":(0,a.CR)(i)}};return"object"==typeof t&&Object.keys(t).length>0&&(l.properties.tracking_properties=t),r({type:u.pF,payload:l})}}function E(e,t){return(r,o)=>{let n=o();return r({type:u.pF,payload:{name:"Tapped Recent Search",properties:{"Search tapped":e,"Selected pill":t,"Served Home Tracking ID":(0,a._p)(n)}}})}}function m(e){return t=>t({type:u.pF,payload:{name:"Tapped Search Empty State",properties:{...e}}})}function T(e){return(t,r)=>{let o=r();return t({type:u.pF,payload:{name:"Saw Recent Search",properties:{searches:(0,a.gu)(o),"Served Home Tracking ID":(0,a._p)(o),"Selected pill":e}}})}}function g(e){return t=>t({type:u.pF,payload:{name:"Viewed Search Drop Down",properties:{"Results array":e}}})}function S(){return async(e,t)=>{let r=t(),{name:o,properties:n}=(0,i.Hz)({name:"Search Scroll Tracking",source:l.SW.HOME_FEED_SEARCH});return 0===n[l.Tt.ITEM_COUNT]?Promise.resolve():(e({type:u.pF,payload:{name:o,properties:{"Served Search Tracking ID":(0,a.CR)(r),...n}}}),(0,p.W.dispatch)((0,i.Rj)(l.SW.HOME_FEED_SEARCH)))}}function f(e,t){return r=>r({type:u.pF,payload:{name:t?"HOME_SEARCH_APPLY_FILTER":"HOME_SEARCH_SHOW_FILTER",properties:{FILTER_ID:e,...t&&{FILTER_OPTION:t}}}})}},71864:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(63696),o=r(2803);function n(){return(0,a.useContext)(o.i)}},26222:(e,t,r)=>{r.d(t,{Rf:()=>I,bW:()=>A,Ef:()=>S,eP:()=>f,hc:()=>h,aH:()=>O});var a=r(99880),o=r(65854),n=r(96689),i=r(49111),l=r(64789),u=r(92390),s=r(17512),p=r(7158),c=r(28311),d=r(50822),_=r(20160);let y=`
  mutation saveFavourite($entity: TargetInput!, $source: ActionSource) {
    results: saveFavourite(entity: $entity, source: $source) {
      entity {
        drnId: drn_id
        type
      }
    }
  }
`,E=`
  mutation unsaveFavourite($entity: TargetInput!, $source: ActionSource) {
    results: unsaveFavourite(entity: $entity, source: $source) {
      entity {
        drnId: drn_id
        type
      }
    }
  }
`;var m=r(61866);let T=`
  query favourites(
    $location: LocationInput!
    $options: SearchOptionsInput
    $ui_actions: [UIActionType!]
    $ui_blocks: [UIBlockType!]
    $ui_controls: [UIControlType!]
    $ui_features: [UIFeatureType!]
    $ui_layouts: [UILayoutType!]
    $ui_targets: [UITargetType!]
    $ui_themes: [UIThemeType!]
    $fulfillment_methods: [FulfillmentMethod!]
    $uuid: String!
    $source: FavouritesSourceInput
    $include_token: Boolean!
  ) {
    results: favourites(
      capabilities: {
        ui_actions: $ui_actions
        ui_blocks: $ui_blocks
        ui_controls: $ui_controls
        ui_features: $ui_features
        ui_layouts: $ui_layouts
        ui_targets: $ui_targets
        ui_themes: $ui_themes
        fulfillment_methods: $fulfillment_methods
      }
      location: $location
      options: $options
      uuid: $uuid
      source: $source
    ) {
      meta {
        trackingId: tracking_uuid
      }
      layoutGroups: ui_layout_groups {
        id
        subheader
        data: ui_layouts {
          ... on UILayoutList {
            typeName: __typename
            header
            key
            blocks: ui_blocks {
              ...uiBlockFields
            }
            trackingId: tracking_id
          }
        }
      }
      uiControls: ui_control_groups {
        layoutGroups: layout_groups {
          key
          label
          selected: selected_by_default
          target: target_layout_group {
            ... on UITargetLayoutGroup {
              typeName: __typename
              layoutGroupId: layout_group_id
            }
          }
        }
      }
    }
  }
  ${m.fO}
  ${m.Du}
  ${m.WA}
  ${m.Oy}
  ${m.gj}
  ${m.dq}
  ${m.Eb}
  ${m.$g}
  ${m.EV}
  ${m.dG}
  ${m.FC}
  ${m.QB}
  ${m.e_}
  ${m.vk}
  ${m.th}
  ${m.l2}
  ${m.bm}
  ${m.wS}
  ${m.Xg}
  ${m.pH}
  ${m.vt}
  ${m.f2}
  ${m.wb}
  ${m.iG}
`;var g=r(28959);let S=e=>async t=>{e||await t((0,g.$d)()),await t({type:_.yk,payload:{isOpen:e}})},f=(e,t)=>({type:_.vZ,payload:{isToastOpen:e,toastAction:t}}),I=e=>async(t,r)=>{let y=r(),E=(0,s.JP)(y),m={fulfillment_method:"DELIVERY",delivery_time:"ASAP"};if(e===p.Xl.PARTNER){let{geohash:e,lat:t,lon:r}=(0,u.Lr)(y);E={geohash:e,lat:t,lon:r},m={fulfillment_method:(0,u.Eq)(y)||"DELIVERY",delivery_time:(0,u.Wr)(y)||"ASAP"}}else if(e===p.Xl.HOME){let{lat:e,lon:t}=(0,i.B4)(y);E={geohash:(0,i.HL)(y),lat:e,lon:t},m={fulfillment_method:(0,i.Eq)(y)||"DELIVERY",delivery_time:(0,i.Wr)(y)||"ASAP"}}let S=!!E.lat&&!!E.lon,f=!!E.geohash;if(!S&&!f)return t((0,l.Oo)());let I={fulfillment_methods:(0,i.dr)(y),location:E,options:m,source:e,uuid:(0,a.A)(),ui_blocks:d.Ap,ui_controls:[...d.wD,"LAYOUT_GROUP"],ui_lines:d.XN,ui_targets:[...d.y8,"LAYOUT_GROUP"],ui_actions:[...(0,c.aM)(y),p.kd.CLOSE_MODAL_ACTION],ui_features:(0,c.US)(y),ui_themes:(0,c.ri)(y),ui_layouts:d.vJ,include_token:(0,o.iM)(y,n.COLOR_TOKENS_MVT,o.lJ.FEATURE)};try{await t({type:_.fi,payload:{querySource:e},endpoint:"/consumer/graphql/",options:{method:"POST",body:{variables:I,query:T}},onSuccess:()=>t((0,g.gv)())})}catch(o){let r=o.status||500,a=o.data||{};await t({type:_.yH,status:r,message:a.message||o.message,payload:{...a,querySource:e}})}},A=function(){let{entity:e="",id:t="",source:r="",count:a=0,isMaxCount:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{await n({type:_.g$,payload:{lastUpdatedFavourite:{id:t,entity:e,saved:!0,count:a,isMaxCount:o,isAdd:!0}}});try{return await n({type:_.C9,endpoint:"/consumer/lists/graphql/",options:{method:"POST",body:{variables:{entity:{drn_id:t,type:e},source:r},query:y}}}),n(f(!0,p.Li.SAVE))}catch(r){let e=r.status||500,t=r.data||{};return await n({type:_.Xm,status:e,message:t.message||r.message,payload:{...t}}),n(f(!0,p.Li.SAVE))}}},O=function(){let{entity:e="",id:t="",source:r="",count:a=0,isMaxCount:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{await n({type:_.g$,payload:{lastUpdatedFavourite:{id:t,entity:e,saved:!1,count:a,isMaxCount:o,isAdd:!1}}});try{return await n({type:_.Zz,endpoint:"/consumer/lists/graphql/",options:{method:"POST",body:{variables:{entity:{drn_id:t,type:e},source:r},query:E}}}),n(f(!0,p.Li.UNSAVE))}catch(r){let e=r.status||500,t=r.data||{};return await n({type:_._j,status:e,message:t.message||r.message,payload:{...t}}),n(f(!0,p.Li.UNSAVE))}}},h=e=>async t=>(await t({type:_.P,payload:{selectedTabId:e}}),t((0,g.fu)(e)))},7158:(e,t,r)=>{r.d(t,{Li:()=>i,Xl:()=>o,kd:()=>a,r:()=>n});var a=function(e){return e.CLOSE_MODAL_ACTION="CLOSE_FAVOURITES_MODAL",e}({}),o=function(e){return e.PARTNER="PARTNER",e.HOME="HOME",e}({}),n=function(e){return e.HOME="HOMEPAGE",e.FAVOURITES="FAVOURITES_PAGE",e.PARTNER="MENU",e}({}),i=function(e){return e.SAVE="SAVE",e.UNSAVE="UNSAVE",e}({})},79945:(e,t,r)=>{r.d(t,{CS:()=>m,L4:()=>c,LY:()=>d,Mj:()=>S,RQ:()=>l,SV:()=>p,aE:()=>T,gS:()=>g,gY:()=>y,kF:()=>E,qq:()=>_,xe:()=>u});var a=r(5762),o=r(65854),n=r(57325),i=r(85202);let l=e=>e.favourites.isLoading,u=e=>e.favourites.isListLoading,s=e=>e.favourites.trackedFavourites,p=(e,t)=>(0,a.Mz)([s],r=>r[`${e}:${t}`]),c=e=>e.favourites.favouritesList.meta?.trackingId,d=e=>e.favourites.favouritesList.layoutTabs,_=e=>e.favourites.favouritesList.selectedTabId,y=(0,a.Mz)([_,e=>e.favourites.favouritesList.layoutGroups,e=>e.favourites.favouritesList.defaultList],(e,t,r)=>t.find(t=>t.id===e)?.data||r),E=e=>e.favourites.isModalOpen,m=e=>e.favourites.querySource,T=(0,a.Mz)([n.eP,e=>(0,o.L4)(e,i.CSR_FAVOURITES_ENTRY_POINT_ENABLED)],(e,t)=>e&&t),g=(0,a.Mz)([e=>e.favourites],e=>e.isToastOpen),S=(0,a.Mz)([e=>e.favourites],e=>e.toastAction)},28959:(e,t,r)=>{r.d(t,{$d:()=>l,V_:()=>u,fu:()=>i,gv:()=>n});var a=r(79945),o=r(84750);function n(){return(e,t)=>{let r=t();return e({type:o.pF,payload:{name:"Viewed Favourites",properties:{"Served Favourites Tracking ID":(0,a.L4)(r),"Active Layout Group ID":(0,a.qq)(r)}}})}}function i(e){return(t,r)=>{let n=r();return t({type:o.pF,payload:{name:"Tapped Layout Group Control",properties:{"Served Favourites Tracking ID":(0,a.L4)(n),"Tapped Layout Group ID":e}}})}}function l(){return(e,t)=>{let r=t();return e({type:o.pF,payload:{name:"Closed Favourites Modal",properties:{"Served Favourites Tracking ID":(0,a.L4)(r)}}})}}function u(e){let{layoutTrackingId:t,blockTrackingId:r}=e;return(e,n)=>{let i=n();return e({type:o.pF,payload:{name:"Tapped Favourites Layout Block",properties:{"Layout Tracking ID":t,"Block Tracking ID":r,"Served Favourites Tracking ID":(0,a.L4)(i)}}})}}},3633:(e,t,r)=>{r.d(t,{U:()=>v,CV:()=>N,iw:()=>U,lh:()=>k,oL:()=>L});var a=r(99880),o=r(33143),n=r(29543),i=r(2e3);let l=`
  ${n.p}
  fragment uiSpanFields on UISpan {
    ...baseUiSpanFields
  }
`,u=`
  ${i.q}
  fragment uiTargetFields on UITarget {
    ...baseUiTargetFields
  }
`,s=`
  fragment uiFeedbackViewFields on UIFeedbackView {
    typeName: __typename
    ... on UIBottomSheetFeedbackView {
      header {
        typeName: __typename
        ... on UIPlusDiamondHeader {
          backgroundColor: background_color {
            ...colorFields
          }
        }
      }
      mainContent: main_content {
        ...uiLineFields
      }
      inputs {
        ...uiFeedbackInputFields
      }
      footerButtons: footer_buttons {
        ...uiButtonFields
      }
      meta {
        trackingUUID: tracking_uuid
        trackingProperties: tracking_properties
      }
    }
  }
`,p=`
  fragment uiFeedbackInputFields on UIFeedbackInput {
    typeName: __typename
    ... on UIThumbRatingInput {
      label {
        ...uiLineFields
      }
      fieldName: field_name
      thumbValue: value
      key
    }
    ... on UISelectListInput {
      label {
        ...uiLineFields
      }
      type
      options {
        ...uiSelectOptionFields
      }
      fieldName: field_name
      key
    }
    ... on UITextAreaInput {
      label {
        ...uiLineFields
      }
      fieldName: field_name
      placeholder
      key
    }
  }
`,c=`
  fragment uiSelectOptionStyleFields on UISelectListOptionStyle {
    backgroundColor: background_color {
      ...colorFields
    }
    textColor: text_color {
      ...colorFields
    }
    selectedBackgroundColor: selected_background_color {
      ...colorFields
    }
    selectedTextColor: selected_text_color {
      ...colorFields
    }
    selectedIcon: selected_icon {
      ...iconFields
    }
    unselectedIcon: unselected_icon {
      ...iconFields
    }
  }
`,d=`
  fragment uiSelectOptionFields on UISelectListOption {
    id
    default
    disabled
    selected
    label
    style {
      ...uiSelectOptionStyleFields
    }
  }

  ${c}
`;var _=r(63769),y=r(81153),E=r(20176);let m=`
  query get_feedback_form($trackingUUID: String!, $params: [ParamInput!]) {
    form: get_feedback_form(tracking_uuid: $trackingUUID, params: $params) {
      ...uiFeedbackViewFields
    }
  }

  ${_.H}
  ${y.TF}
  ${E.z}
  ${n.Z}
  ${l}
  ${u}
  ${s}
  ${p}
  ${d}
`,T=`
  mutation submit_feedback_form($input: FeedbackInput!, $trackingUUID: String!) {
    response: submit_feedback_form(tracking_uuid: $trackingUUID, input: $input) {
      success
      message
    }
  }
`;var g=r(84750),S=r(96640),f=r(63153),I=r(90509),A=r(9481),O=r(34823),h=r(51913);let L=e=>{let{source:t}=e;return(e,r)=>{let a=r(),o=(0,S.$i)(a)||{},n=(0,I.st)(a)||{},i=f.lJ in n;return e({type:g.pF,payload:{name:"Viewed Feedback Modal",properties:{...o,source:i?f.kB.DEEP_LINK:t}}})}},k=()=>(e,t)=>{let r=t(),a=(0,S.$i)(r)||{};return e({type:g.pF,payload:{name:"Dismissed Feedback Modal",properties:{...a}}})},R=()=>(e,t)=>{let r=t(),a=(0,S.$i)(r)||{};return e({type:g.pF,payload:{name:"Submitted Feedback Modal",properties:{...a}}})},v=e=>{let{params:t=[]}=e;return e=>e({type:o.Z8,endpoint:"/consumer/feedback/graphql/",options:{method:"POST",body:{variables:{trackingUUID:(0,a.A)(),params:t},query:m}}})},U=e=>{let{formData:t,params:r=[]}=e;return(e,a)=>{let n=a(),i=(0,S.f3)(n);return e(R()),e({type:o.yv,endpoint:"/consumer/feedback/graphql/",options:{method:"POST",body:{variables:{trackingUUID:i,input:{form_data:t,params:r}},query:T}},onSuccess:t=>{let{payload:r}=t;return r.errors?(0,A.tq)(A.s8.CO_FEEDBACK,Error("Submit Feedback Mutation Error"),(0,A.RU)(r.errors)):e((0,O.u)({message:r.data.response?.message||h.A.gettext("feedback.thanks"),type:"success"}))}})}},N=(e,t)=>({type:o.wb,payload:{isOpen:e,targetParams:t}})},63153:(e,t,r)=>{r.d(t,{Sb:()=>a,XK:()=>o,bx:()=>i,kB:()=>n,lJ:()=>l});let a={UI_SELECT_LIST:"UISelectListInput",UI_TEXT_AREA:"UITextAreaInput",UI_THUMB_RATING:"UIThumbRatingInput"},o={UI_TARGET_WEB_PAGE:"UITargetWebPage",UI_TARGET_ACTION:"UITargetAction",UI_TARGET_MUTATION:"UITargetMutation"};var n=function(e){return e.LANDING_PAGE="LANDING_PAGE",e.HOME_FEED="HOME_FEED",e.PLUS_ACCOUNT="PLUS_ACCOUNT",e.ACCOUNT="ACCOUNT",e.DEEP_LINK="DEEP_LINK",e}({});let i={PLUS_DIAMOND:"UIPlusDiamondHeader"},l="ff_tid"},96640:(e,t,r)=>{r.d(t,{$i:()=>s,CJ:()=>i,L9:()=>l,RQ:()=>p,cW:()=>n,f3:()=>u,vG:()=>d});var a=r(5762),o=r(7922);let n=e=>e.feedback.isFormOpen,i=e=>e.feedback.form,l=e=>e.feedback.targetParams,u=e=>e.feedback.form?.meta?.trackingUUID,s=e=>e.feedback.form?.meta?.trackingProperties,p=e=>e.feedback.isLoading,c=[e=>{let{errors:t}=e;return!!t.network&&t.network?.status===422&&new o.eO(`Invalid Feedback GraphQL request. ${t.network.errors[0].message}`)},e=>{let{errors:t}=e;return!!t.network&&t.network?.status!==200&&new o.Dr(`Network Error for Feedback API: HTTP ${t.network.status} - ${t.network.message}`)},e=>{let{errors:t}=e;return t.graphql.length>0&&new o.eO(`Feedback GraphQL Error. ${t.graphql[0].message}`,t.graphql[0].extensions)}],d=(0,a.Mz)(e=>e.feedback,e=>c.map(t=>t(e)).find(Boolean))},54243:(e,t,r)=>{r.d(t,{A:()=>p,k:()=>u});var a=r(62540),o=r(63696),n=r(62688),i=r.n(n);let l=(0,o.createContext)(),u=()=>(0,o.useContext)(l),s=e=>{let{children:t}=e,[r,n]=(0,o.useState)(void 0),[i,u]=(0,o.useState)({}),[s,p]=(0,o.useState)(!1),c=e=>i[e]?{...i,[e]:i[e]+1}:{...i,[e]:1};return(0,a.jsx)(l.Provider,{value:{setModalType:e=>{n(e),e&&u(c(e))},modalType:r,viewedModals:i,acknowledgedBasketBlock:s,setAcknowledgedBasketBlock:p},children:t})};s.propTypes={children:i().node.isRequired};let p=s},20176:(e,t,r)=>{r.d(t,{z:()=>a});let a=`
  fragment uiButtonFields on UIButton {
    key
    trackingId: tracking_id
    line: ui_line {
      ...uiLineFields
    }
    text
    target {
      ...uiTargetFields
    }
    type
    contentDescription: content_description
    trackingProperties: tracking_properties
  }
`},91133:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(63696),o=r(27817);let n=()=>{let{setMenuItemModal:e}=(0,o.wX)();return{openMenuItemModal:(0,a.useCallback)((t,r)=>{e({requestData:t,trackingId:r})},[e])}}},41538:(e,t,r)=>{r.d(t,{y8:()=>D,jf:()=>M,Ay:()=>G});var a=r(61971),o=r(85022),n=r(94943),i=r(42353),l=r(19953),u=r(18612),s=r(3633),p=r(30902),c=r(9879),d=r(1561),_=r(54243),y=r(74444),E=r(74183),m=r(7158),T=r(26222),g=r(20343),S=r(44038),f=r(91133),I=r(49111),A=r(71864),O=r(61794),h=r(94347),L=r(24327),k=r(63696),R=r(30064);let v=()=>{let{setMultiPartnerOrderingModal:e}=(0,R.rb)();return{openMultiPartnerOrderingModal:(0,k.useCallback)(t=>{e(t.branchDRNId)},[e])}},{Sentry:U,captureException:N}=(0,g.A)();var F=function(e){return e.INVALID_TARGET="INVALID_TARGET",e.UNSUPPORTED_TARGET="UNSUPPORTED_TARGET",e}(F||{}),b=function(e){return e.COMPONENT_TRACKING_ID="component_tracking_id",e.TRACKING_ID="tracking_id",e.ACTION_TRACKING_ID="action_tracking_id",e.LAYOUT_TRACKING_ID="layout_tracking_id",e}(b||{}),C=function(e){return e.MENU_TAG="menu_tag",e.SUB_MENU_TAG="sub_menu_tag",e.SERVER_QUERY_TYPE="query_type",e.CLIENT_QUERY_TYPE="query-type",e.COLLECTION="collection",e.RESTAURANT="restaurant_href",e}(C||{}),M=function(e){return e[e.MENU_TAG=0]="MENU_TAG",e[e.NAVIGATE_TO_MENU_TAG=1]="NAVIGATE_TO_MENU_TAG",e[e.OFFER=2]="OFFER",e[e.HTTP=3]="HTTP",e[e.RESTAURANT=4]="RESTAURANT",e[e.NAVIGATE_TO_RESTAURANT=5]="NAVIGATE_TO_RESTAURANT",e[e.PLUS=6]="PLUS",e[e.PLUS_SUBSCRIPTION=7]="PLUS_SUBSCRIPTION",e[e.FEEDBACK=8]="FEEDBACK",e[e.SPONSORED_AD_DISCLOSURE=9]="SPONSORED_AD_DISCLOSURE",e[e.OPEN_MENU_LAYOUT_MODAL=10]="OPEN_MENU_LAYOUT_MODAL",e[e.OPEN_MENU_REVIEWS=11]="OPEN_MENU_REVIEWS",e[e.OPEN_TOOLTIP=12]="OPEN_TOOLTIP",e[e.FULFILLMENT_TIME_PICKER=13]="FULFILLMENT_TIME_PICKER",e[e.LINK_LOYALTY_CARD=14]="LINK_LOYALTY_CARD",e[e.UNLINK_LOYALTY_CARD=15]="UNLINK_LOYALTY_CARD",e[e.OPEN_URL=16]="OPEN_URL",e[e.SAVE_FAVOURITE=17]="SAVE_FAVOURITE",e[e.REMOVE_FAVOURITE=18]="REMOVE_FAVOURITE",e[e.NAVIGATE_TO_ITEM=19]="NAVIGATE_TO_ITEM",e[e.OPEN_PLUS_SHORT_SIGNUP=20]="OPEN_PLUS_SHORT_SIGNUP",e[e.OPEN_MULTI_PARTNER_ORDERING_MODAL=21]="OPEN_MULTI_PARTNER_ORDERING_MODAL",e}({});let D={"deliveroo://menu_tags/":0,"deliveroo://navigate_to_menu_tag":1,"deliveroo://offers/":2,"deliveroo://restaurants/":4,"deliveroo://navigate_to_restaurant":5,"deliveroo://plus":6,"deliveroo://open_plus_subscription":7,"deliveroo://feedback":8,"deliveroo://open_delivery_time_picker":13,"deliveroo://open_menu_layout_modal":10,"deliveroo://open_menu_reviews":11,"deliveroo://open_sponsored_modal":9,"deliveroo://link_loyalty_card":14,"deliveroo://unlink_loyalty_card":15,"deliveroo://open_url":16,"deliveroo://save_favourite":17,"deliveroo://remove_favourite":18,"deliveroo://navigate_to_item":19,"deliveroo://plus_short_sign_up":20,"deliveroo://open_multi_partner_ordering_modal":21,"http://":3,"https://":3},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";return e.replace(/\?/g,t)},$=(e,t)=>({id:e,value:[t]}),w=e=>e.split("&").filter(e=>!e.startsWith("direct_to_signup")).join("&"),V={0:"collection",2:"offer"},H=e=>Object.keys(D).find(t=>t.endsWith("/")||t.startsWith("http")?e.startsWith(t):e.split("?")[0]===t),G=()=>{let e=(0,n.j)(),t=(0,l.Ay)(),r=(0,p.yk)(),{setLayoutView:g}=(0,c.M)(),k=(0,_.k)(),{openMenuItemModal:R}=(0,f.A)(),{openMultiPartnerOrderingModal:F}=v(),b=(0,o.d4)(I.Eq),{cityUname:C,neighborhoodUname:M,geohash:G,lon:B,lat:q}=(0,o.d4)(I.g$)||{},W=(0,o.d4)(I.Wr),K=o.d4(I.tJ)?.toLowerCase(),Y=(0,A.A)();return(o,n,l,c)=>{try{let _=H(o);if(!_)throw Error("INVALID_TARGET");let f=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.layout_tracking_id||n?.layoutTrackingId;if(!r)return;let a=t.action_tracking_id||t.tracking_id,o=t.component_tracking_id||n?.blockTrackingId;o?e((0,u.p)({blockTrackingId:o,layoutTrackingId:r,actionTrackingId:a,blockTrackingProperties:n?.blockTrackingProperties})):e((0,u.e4)(r))};switch(D[_]){case 3:case 16:case 0:case 1:case 4:case 5:case 19:{let e=n?.blockTrackingProperties?.ad?.serve_id;e&&Y({action:O.S.CLICK,ad_serve_id:e})}}switch(D[_]){case 3:t.getRouteHandler(o,f)();break;case 0:case 2:{let t=D[_],r=P(`${V[t]}=${o.split(_)[1]}`),{query:a}=new y.Ay(o);f(a),e((0,i.to)({selectedFilters:[r],clearCollection:!0}));break}case 1:{let{query:t}=new y.Ay(o),r=(0,a.stringify)({collection:[t.menu_tag,t.sub_menu_tag],"query-type":t.query_type});f(t),e((0,i.to)({selectedFilters:[r],clearCollection:!0}));break}case 4:case 5:{l&&l.preventDefault();let{query:e}=new y.Ay(o),r=e.restaurant_href;r&&((0,i.PP)(),t.getRouteHandler(String(r),()=>f(e))(l));break}case 6:case 7:{let{query:e,search:r}=new y.Ay(o),a=w(r);t.getRouteHandler(`/plus${a}`,()=>f(e),"push",{newWindow:!0})();break}case 20:{let{query:t}=new y.Ay(o),r=[];Object.entries(t).forEach(e=>{let[t,a]=e;return r.push($(t,String(a)))}),e((0,h.v4)(void 0,{onlySupportsPlus:!0})),e((0,L.ue)(r,L.kB.ROOBLOCKS_MODAL_TARGET)),f(t);break}case 8:{let{query:t}=new y.Ay(o),r=[];Object.entries(t).forEach(e=>{let[t,a]=e;return r.push($(t,String(a)))}),e((0,s.CV)(!0,r)),f(t);break}case 9:{let{query:e}=new y.Ay(o);r.openModal(p.q3.SPONSORED_AD_DISCLOSURE,{adServeId:String(e.ad_serve_id),onClose:r.closeModal});break}case 10:{let{query:e}=new y.Ay(o);e?.layout_id&&g(String(e.layout_id),d.lv.SHOW_MODAL);break}case 21:{let{query:e}=new y.Ay(o);e?.branch_drn_id&&e?.tracking_id&&F({branchDRNId:String(e.branch_drn_id),trackingId:String(e.tracking_id)});break}case 11:e((0,S.Ul)(!0));break;case 13:k?.setModalType&&k.setModalType(d.uD.LOGISTICS_MODAL);break;case 14:{let{query:{branch_drn_id:t}}=new y.Ay(o);"string"==typeof c?.value&&e((0,E.I5)(String(t),c.value));break}case 15:{let{query:{branch_drn_id:t}}=new y.Ay(o);e((0,E.YC)(String(t)));break}case 17:case 18:{let{query:{type:t,drnId:r}}=new y.Ay(o),a=c?.["props.favourite-count"]||0,n=17===D[_]?T.bW:T.aH;e(n({id:String(r),entity:String(t).toLocaleUpperCase(),source:m.r.HOME,count:a}));break}case 16:{let{query:{url:e,new_window:t}}=new y.Ay(o);e&&(t?window.open(String(e),"_blank"):window.location.href=String(e));break}case 19:{let{query:e}=new y.Ay(o),t=e.restaurant_id,r=e.menu_item_id,a=e.component_tracking_id||n?.blockTrackingId;R({fulfillmentMethod:b,deliveryTime:W,deliveryDay:K,location:{coordinates:[B,q],cityUname:C,neighborhoodUname:M,geohash:G},restaurantId:t,menuItemId:r},a),f(e);break}default:throw Error("UNSUPPORTED_TARGET")}}catch(t){let e="INVALID_TARGET"===t.message||"UNSUPPORTED_TARGET";U.withScope(r=>{r.setTags({service:"ROOBLOCKS",target:o,error_type:e?t.message:void 0}),N(t)})}return null}}},28311:(e,t,r)=>{r.d(t,{US:()=>l,aM:()=>i,ri:()=>u});var a=r(85202),o=r(50822),n=r(65854);let i=e=>{let t=(0,n.L4)(e,a.HOME_MAP_VIEW_CLIENT_FLAG),r=(0,n.L4)(e,a.GR_CHALLENGES_ENABLED),i=(0,n.L4)(e,a.PG_FREE_PLUS_ENABLED),l=[...o.Jm];return t&&l.push(o.k1),r&&l.push(o.j6,o.pG),i&&l.push(o.mb),l},l=e=>{let t=(0,n.L4)(e,a.HOME_MAP_VIEW_CLIENT_FLAG),r=[...o.hm];return t&&r.push(o.WC),r},u=e=>{let t=(0,n.L4)(e,a.GR_CHALLENGES_ENABLED),r=(0,n.L4)(e,a.PG_FREE_PLUS_ENABLED),i=[...o.QP];return t&&i.push(o.rz),r&&i.push(o.EJ),i}},1193:(e,t,r)=>{r.d(t,{B3:()=>y,CS:()=>_,F6:()=>m,FU:()=>d,NA:()=>p,QG:()=>s,cg:()=>c,ok:()=>E});var a=r(99880),o=r(65854),n=r(96689),i=r(41784),l=r(28311),u=r(49111);let s=e=>{let{home:t}=e;return!0===t.map.isOpen},p=e=>({location:{...(0,u.B4)(e),radius:i.es},options:{delivery_time:(0,u.Wr)(e),fulfillment_method:(0,u.Eq)(e),params:(0,u.C7)(e),query:(0,u.V8)(e)},ui_actions:(0,l.aM)(e),ui_features:(0,l.US)(e),uuid:(0,a.A)(),include_token:(0,o.iM)(e,n.COLOR_TOKENS_MVT,o.lJ.FEATURE)}),c=e=>{let{home:t}=e;return!0===t.map.isLoading},d=e=>{let{home:t}=e;return t.map.cards},_=e=>{let{home:t}=e;return t.map.hasError},y=e=>{let{home:t}=e;return t.map.latLngBounds},E=e=>{let{home:t}=e;return t.map.pins},m=e=>{let{home:t}=e;return t.map.selectedRestaurantId}},24903:(e,t,r)=>{r.d(t,{U:()=>a,q:()=>o});let a=e=>e?.find(e=>"clipboard-content"===e.id)?.value?.[0]??"",o=e=>"COPY_TO_CLIPBOARD"===e},29466:(e,t,r)=>{r.d(t,{$Y:()=>m,Yz:()=>d,mp:()=>y,nG:()=>c,xb:()=>E});var a=r(51913),o=r(12330);let n="recentSearches",i="recentSearchesV2",l=e=>{let t={};for(let r of e)t[r]=[];return t},u=e=>{if(!(0,o.isLocalStorageAvailable)())return[];let t=window.localStorage.getItem(n);return t?JSON.parse(t):l(e)},s=e=>{(0,o.isLocalStorageAvailable)()&&window.localStorage.setItem(n,JSON.stringify(e))},p=(e,t)=>({...e,[t]:[]}),c=(e,t,r)=>{if(!(0,o.isLocalStorageAvailable)()||!r)return;let a=u(t);Object.keys(a).includes(r)||(a=p(a,r));let n=a[r]?.findIndex(t=>t.search_term===e);-1!==n&&a[r]?.splice(n,1),a[r]?.unshift({search_term:e}),a[r]?.length>10&&a[r].pop(),s(a)},d=(e,t)=>{let r=u(e)[t]||[];return[{typeName:"UILayoutList",header:r.length?a.A.gettext("search.sections.recent_searches"):"",key:"recent-searches",blocks:r.map(e=>{let{search_term:t}=e;return{typeName:"UIBasicRow",key:t,contentMain:[{key:"1",typeName:"UIBasicRowTextContent",textContent:[{typeName:"UITextLine",key:"2",spans:[{typeName:"UISpanIcon",key:"3",icon:{name:"CLOCK",size:"MEDIUM",color:{hex:"#abadad",red:171,green:173,blue:173,alpha:1,token:"foreground-neutral-subtle-on-elevation-base"}}},{typeName:"UISpanSpacer",key:"4",width:"MEDIUM"},{typeName:"UISpanText",key:"5",text:t,size:"MEDIUM",trackingId:null,target:null,color:{hex:"#2e3333",red:46,green:51,blue:51,alpha:1,token:"foreground-neutral-normal-on-elevation-base"},isBold:!1}],maxLines:1}]}],target:{typeName:"UITargetAction",action:"SEARCH",params:[{id:"searchTerm",value:t}]}}})}]},_=e=>{let t=JSON.parse(e),r=new Date;return Object.entries(t).flatMap(e=>{let[t,a]=e;return Array.isArray(a)&&0!==a.length?a.reduce((e,a)=>(e.push({search_term:a.search_term.trim(),pill_id:t,date_time:r}),e),[]):[]})},y=()=>{if(!(0,o.isLocalStorageAvailable)())return[];let e=localStorage.getItem(i);if(e)return JSON.parse(e);let t=localStorage.getItem(n);return t?_(t):[]},E=e=>{(0,o.isLocalStorageAvailable)()&&localStorage.setItem(i,JSON.stringify(e))},m=(e,t)=>{if(!(0,o.isLocalStorageAvailable)())return;let r=y(),a={search_term:e,pill_id:t,date_time:new Date};r.push(a),E(r)}}}]);
//# sourceMappingURL=1538-fde127483558af59.js.map